---
import Layout from '../../layouts/Layout.astro';
import { loadScrapingData, formatTime, formatWind, formatDate, compareMeasurements } from '../../utils/dataUtils';

const data = loadScrapingData();
const mixedRankings = data.data.seasonalBests?.mixed || [];
---

<Layout title="Mejores Marcas de la Temporada - Mixto - Atletismo Stats">
    <div class="page-title">üìÖ Mejores Marcas de la Temporada - Mixto</div>
    <p class="page-description">
        Rankings actuales de las mejores marcas de la temporada por evento (hombres y mujeres).
    </p>

    <div class="nav-buttons">
        <a href={import.meta.env.BASE_URL} class="nav-link">‚Üê Inicio</a>
        <a href={`${import.meta.env.BASE_URL}rankings/season-men`} class="nav-link">Solo Hombres</a>
        <a href={`${import.meta.env.BASE_URL}rankings/season-women`} class="nav-link">Solo Mujeres</a>
        <a href={`${import.meta.env.BASE_URL}rankings/all-time`} class="nav-link">Todos los Tiempos Mixto</a>
        <a href={`${import.meta.env.BASE_URL}athletes`} class="nav-link">Atletas</a>
    </div>

    {mixedRankings.map(event => {
        return event.records.length > 0 && (
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">{event.event}</h2>
                    <div class="card-subtitle">Categor√≠a: Mixto (Hombres y Mujeres)</div>
                </div>
                <div class="card-body">
                    <div class="table-container">
                        <table class="ranking-table">
                            <thead>
                                <tr>
                                    <th>Pos</th>
                                    <th>Atleta</th>
                                    <th>G√©nero</th>
                                    <th>Marca</th>
                                    <th>Viento</th>
                                    <th>Fecha</th>
                                </tr>
                            </thead>
                            <tbody>
                                {event.records.map((record, index) => (
                                    <tr class={index < 3 ? `podium-${index + 1}` : ''}>
                                        <td class="position">
                                            {index === 0 && 'ü•á'}
                                            {index === 1 && 'ü•à'}
                                            {index === 2 && 'ü•â'}
                                            {index > 2 && (index + 1)}
                                        </td>
                                        <td class="athlete">
                                            <span>{record.athlete}</span>
                                        </td>
                                        <td class="gender">
                                            {record.gender === 'M' && '‚ôÇÔ∏è'}
                                            {record.gender === 'F' && '‚ôÄÔ∏è'}
                                            {!record.gender && '-'}
                                        </td>
                                        <td class="measurement">{formatTime(record.measurement)}</td>
                                        <td class="wind">{formatWind(record.wind) || '-'}</td>
                                        <td class="date">{formatDate(record.date)}</td>
                                    </tr>
                                ))}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        );
    })}

    {mixedRankings.length === 0 && (
        <div class="card">
            <div class="card-body">
                <p style="text-align: center; color: var(--text-secondary); padding: 2rem;">
                    No hay datos de rankings mixtos de temporada disponibles.
                </p>
            </div>
        </div>
    )}
</Layout>

<style>
    .nav-buttons {
        display: flex;
        gap: 1rem;
        margin: 1.5rem 0;
        flex-wrap: wrap;
    }

    .nav-link {
        padding: 0.5rem 1rem;
        background: var(--card-background);
        color: var(--text-color);
        text-decoration: none;
        border-radius: 8px;
        border: 1px solid var(--border-color);
        transition: all 0.3s ease;
    }

    .nav-link:hover {
        background: var(--secondary-color);
        color: white;
        transform: translateY(-1px);
    }

    .table-container {
        overflow-x: auto;
        margin: -1rem;
        padding: 1rem;
    }

    .ranking-table {
        width: 100%;
        border-collapse: collapse;
        min-width: 600px;
    }

    .ranking-table th {
        text-align: left;
        padding: 0.75rem;
        font-weight: 600;
        border-bottom: 2px solid var(--border-color);
        background: var(--background-color);
    }

    .ranking-table td {
        padding: 0.75rem;
        border-bottom: 1px solid var(--border-color);
    }

    .ranking-table tr:hover {
        background: var(--background-color);
    }

    .position {
        text-align: center;
        font-weight: bold;
        width: 60px;
    }

    .athlete a {
        color: var(--secondary-color);
        text-decoration: none;
        font-weight: 500;
    }

    .athlete a:hover {
        text-decoration: underline;
    }

    .measurement {
        font-weight: 600;
        color: var(--secondary-color);
    }

    .wind, .date {
        color: var(--text-secondary);
        font-size: 0.9rem;
    }

    .podium-1 {
        background: linear-gradient(90deg, rgba(255, 215, 0, 0.1), transparent);
    }

    .podium-2 {
        background: linear-gradient(90deg, rgba(192, 192, 192, 0.1), transparent);
    }

    .podium-3 {
        background: linear-gradient(90deg, rgba(205, 127, 50, 0.1), transparent);
    }

    @media (max-width: 768px) {
        .nav-buttons {
            flex-direction: column;
        }
        
        .nav-link {
            text-align: center;
        }
        
        .ranking-table {
            font-size: 0.9rem;
        }
        
        .ranking-table th,
        .ranking-table td {
            padding: 0.5rem;
        }
    }
</style>
